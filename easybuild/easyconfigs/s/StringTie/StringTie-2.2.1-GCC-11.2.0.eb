# This file is an EasyBuild reciPY as per https://easybuilders.github.io/easybuild/
# Author: Pablo Escobar Lopez
# sciCORE - University of Basel
# SIB Swiss Institute of Bioinformatics 

easyblock = 'MakeCp'

name = 'StringTie'
version = '2.2.1'

homepage = 'https://ccb.jhu.edu/software/stringtie/'
description = 'StringTie is a fast and highly efficient assembler of RNA-Seq alignments into potential transcripts'

toolchain = {'name': 'GCC', 'version': '11.2.0'}

source_urls = ['https://github.com/gpertea/%(namelower)s/releases/download/v%(version)s']
sources = [SOURCELOWER_TAR_GZ]
patches = ["%(name)s-%(version)s_fix-linking.patch"]
checksums = [
    'ce4eec532bbbe39af462be844afa6395ab38fa3418ef5fc2431e2d6194129527',  # stringtie-2.2.1.tar.gz
    'b82dae4790ea9472fe9fe0578b6659afd8006640c5ea488661a4e222103bab6a',  # StringTie-2.2.1_fix-linking.patch
]

dependencies = [
    ('bzip2', '1.0.8'),
    ('libdeflate', '1.8'),
    ('XZ', '5.2.5'),
    ('zlib', '1.2.11'),
    ('HTSlib', '1.14'),
]

# the test script downloads some test data from the internet
buildopts = 'release && ./run_tests.sh'

files_to_copy = [
    (['%(namelower)s', 'prepDE.py'], 'bin'),
    'README.md',
    'LICENSE'
]

sanity_check_paths = {
    'files': ['bin/%(namelower)s'],
    'dirs': [],
}

moduleclass = 'bio'
