# Author: Jasper Grimm (UoY)
easyblock = 'MakeCp'

name = 'SPOOLES'
version = '2.2'

homepage = 'https://netlib.org/linalg/spooles/spooles.2.2.html'
description = """SPOOLES is a library for solving sparse real and complex linear
 systems of equations, written in the C language using object oriented design.
"""

toolchain = {'name': 'gompi', 'version': '2021a'}

source_urls = ['https://netlib.org/linalg/spooles']
sources = ['%(namelower)s.%(version)s.tgz']
patches = [
    '%(name)s-2.2_build-mpi-mt.patch',
    '%(name)s-2.2_shared-libs.patch',
]
checksums = [
    {'spooles.2.2.tgz': 'a84559a0e987a1e423055ef4fdf3035d55b65bbe4bf915efaa1a35bef7f8c5dd'},
    {'SPOOLES-2.2_build-mpi-mt.patch': 'a4abc168c660f4af55feb865c5559304a099755e2c46ebf09fabd83bb1636d2c'},
    {'SPOOLES-2.2_shared-libs.patch': '7b767a699679740ec2a4acd12e66c4a3656a276c354f61436e82cb4d448741f4'},
]

builddependencies = [
    ('Perl', '5.32.1', '-minimal'),
]

build_cmd_targets = 'lib'
buildopts = 'CC="$CC" CFLAGS="$CFLAGS" MPI_LIB_PATH="$MPI_LIB_DIR" MPI_INCLUDE_DIR="$MPI_INC_DIR"'

files_to_copy = ['*']

sanity_check_paths = {
    'files': [],
    'dirs': ['lib'],
}

moduleclass = 'math'
