# With <3 for EasyBuild
#
# EasyConfig for BLASR:
# ----------------------------------------------------------------------------
#   Copyright: 2013 - Gregor Mendel Institute of Molecular Plant Biology GmBH
#   License: MIT
#   Authors: Petar <petar.forai@gmi.oeaw.ac.at> Forai
# ----------------------------------------------------------------------------

easyblock = 'MakeCp'

name = 'blasr'
version = 'smrtanalysis-2.1'

homepage = 'https://github.com/PacificBiosciences/blasr'
description = """BLASR (Basic Local Alignment with Successive Refinement) rapidly maps reads to genomes by finding the
 highest scoring local alignment or set of local alignments between the read and the genome. Optimized for PacBio's
 extraordinarily long reads and taking advantage of rich quality values, BLASR maps reads rapidly with high accuracy."""


toolchain = {'name': 'goolf', 'version': '1.4.10'}
toolchainopts = {'optarch': True, 'pic': True}

sources = ['%(version)s.tar.gz']
source_urls = ['https://github.com/PacificBiosciences/blasr/archive/']

patches = ['blasr-%(version)s_non-static.patch']

dependencies = [
    ('HDF5', '1.8.9'),
]

buildopts = 'HDF5INCLUDEDIR=${EBROOTHDF5}/include HDF5LIBDIR=${EBROOTHDF5}/lib'

files_to_copy = [(['alignment/bin/wordCounter', 'alignment/bin/printReadWordCount', 'alignment/bin/blasr',
                   'alignment/bin/sdpMatcher', 'alignment/bin/swMatcher', 'alignment/bin/kbandMatcher',
                   'alignment/bin/sawriter', 'alignment/bin/saquery', 'alignment/bin/samodify',
                   'alignment/bin/printTupleCountTable', 'alignment/bin/malign',
                   'alignment/bin/cmpPrintTupleCountTable', 'alignment/bin/removeAdapters',
                   'alignment/bin/tabulateAlignment', 'alignment/bin/samatcher', 'alignment/bin/sals',
                   'alignment/bin/saprinter', 'alignment/bin/buildQualityValueProfile', 'alignment/bin/extendAlign',
                   'alignment/bin/guidedalign', 'alignment/bin/pbmask'],'bin')]


sanity_check_paths = {
    'files': ['bin/wordCounter', 'bin/printReadWordCount', 'bin/blasr', 'bin/sdpMatcher', 'bin/swMatcher',
              'bin/kbandMatcher', 'bin/sawriter', 'bin/saquery', 'bin/samodify', 'bin/printTupleCountTable',
              'bin/malign', 'bin/cmpPrintTupleCountTable', 'bin/removeAdapters', 'bin/tabulateAlignment',
              'bin/samatcher', 'bin/sals', 'bin/saprinter', 'bin/buildQualityValueProfile', 'bin/extendAlign',
              'bin/guidedalign', 'bin/pbmask'],
    'dirs': [],
}

moduleclass = 'bio'
