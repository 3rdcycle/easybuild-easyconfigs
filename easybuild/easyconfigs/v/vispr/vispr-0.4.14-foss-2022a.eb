# Author: Denis Kristak (Inuits)

easyblock = 'PythonPackage'

name = 'vispr'
version = '0.4.14'

homepage = 'https://pypi.org/project/vispr/'

description = """
VISPR - A visualization framework for CRISPR data.
"""

toolchain = {'name': 'foss', 'version': '2022a'}

sources = ['%(name)s-%(version)s.tar.gz']
patches = ['vispr-0.4.14_fix_pandas_version_change.patch']
checksums = [
    {'vispr-0.4.14.tar.gz': 'dc2cf6ac9c8930b0f1f1b3a2b7f57bfae180b2ac3674060123fd2d7fe10ccd82'},
    {'vispr-0.4.14_fix_pandas_version_change.patch':
     'a5b5bb73b4d3dc4166c71ffd468496c19add46edec55029fe9f40e880a90e9a6'},
]

dependencies = [
    ('Python', '3.10.4'),
    ('Flask', '2.2.2'),
    ('SciPy-bundle', '2022.05'),
    ('PyYAML', '6.0'),
    ('scikit-learn', '1.1.2'),
]

download_dep_fail = True
use_pip = True

preinstallopts = "sed -i 's/from jinja2 import Markup/from markupsafe import Markup/g' vispr/server.py && "

sanity_check_paths = {
    'files': ['bin/vispr'],
    'dirs': [],
}

sanity_check_commands = ["vispr --help"]

sanity_pip_check = True

moduleclass = 'bio'
