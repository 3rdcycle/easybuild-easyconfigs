easyblock = 'MesonNinja'

name = 'xtb'
version = '6.3.0'

homepage = 'https://xtb-docs.readthedocs.io'
description = """Semiempirical Extended Tight-Binding Program Package"""

toolchain = {'name': 'foss', 'version': '2019a'}
toolchainopts = {}  

# Waiting for new release with GCC suport
# sources = ['v%(version_major_minor)s-pre.1.tar.gz']
sources = ['master.zip']
github_account='grimme-lab'
source_urls = [GITHUB_LOWER_SOURCE]

builddependencies = [
    ('Meson', '0.51.2', '-Python-3.7.4', ('GCCcore', '8.3.0')),
    ('Ninja', '1.9.0', '', ('GCCcore', '8.3.0')),
]

dependencies = [
   ('ATLAS', '3.10.2', '-2.26-LAPACK-3.6.1', ('GCC', '5.4.0')),
]

separate_build_dir = True

preconfigopts = 'FC=gfortran CC=gcc '
configopts = "-Dla_backend='openblas' --optimization=2"

buildopts = 'test'

# The sanity test MUST be tuned before going production and submitting your contribution to upstream git repositories
sanity_check_paths = {
    'files': [],
    'dirs': ["."]
}

moduleclass = 'chem'
