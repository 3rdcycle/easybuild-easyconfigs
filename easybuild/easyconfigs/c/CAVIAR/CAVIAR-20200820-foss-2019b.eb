easyblock = 'MakeCp'

name = 'CAVIAR'
version = '20200820'

homepage = "https://github.com/fhormoz/caviar"
description = """CAusal Variants Identication in Associated Regions. A statistical framework
 that quantifies the probability of each variant to be causal while allowing an arbitrary
 number of causal variants."""

toolchain = {'name': 'foss', 'version': '2019b'}

sources = [{
    'filename': 'CAVIAR-20200820.tar.gz',
    'git_config': {
        'url': 'https://github.com/fhormoz',
        'repo_name': 'caviar',
        'commit': '135b58b',
    },
}]
patches = ['CAVIAR-20200820-openblas.patch']
checksums = [
    '7b8dae8b963207b676b2750f142fc86063468750a4ea6ca8cec383511ea8f483',  # CAVIAR-20200820.tar.gz
    '5fb85a0822902485c5da35f48ae86796e9d13d00763baac98a3ad1c6f27b7332',  # CAVIAR-20200820-openblas.patch
]

dependencies = [
    ('GSL', '2.6'),
]

start_dir = "%(name)s-C++"

files_to_copy = [
    (['%(name)s-C++/%(name)s', '%(name)s-C++/e%(name)s', '%(name)s-C++/set%(name)s',
     '%(name)s-C++/mup%(name)s'], "bin"),
]

sanity_check_paths = {
    'files': ['bin/%s' % x for x in ['%(name)s', 'e%(name)s', 'set%(name)s', 'mup%(name)s']],
    'dirs': [''],
}

moduleclass = 'bio'
