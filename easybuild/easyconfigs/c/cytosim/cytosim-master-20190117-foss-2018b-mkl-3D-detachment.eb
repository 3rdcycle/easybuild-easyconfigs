# Contribution from the Crick HPC team
# uploaded by J. Sassmannshausen

easyblock = 'MakeCp'

name = 'cytosim'
github_account = 'nedelec'
version = 'master-20190117'
versionsuffix = '-mkl-3D-detachment'

homepage = 'https://github.com/nedelec/cytosim'
description = """Cytosim is a cytoskeleton simulation engine written in 
C++ working on Mac OS, GNU/Linux and Windows (with Cygwin).
This version has set the new end dependant detachment to 1 and
is for 3 dimensions!"""

toolchain = {'name': 'foss', 'version': '2018b'}

source_urls = [GITHUB_SOURCE]
sources = [{
    'filename': '3ecab25.tar.gz',
}]

checksums = [
    'c5209ec9761902769299ad666d621dc3c169f8f73cce6799a99087be259fd246',   # 3ecab25.tar.gz
    '5d0389884862d21878c1923e71ed87185dc2e9260206c7514f339fec4c2d14d1',   # mkl.patch
    '20e97f788b5e712e9f15524f531985940d4a1f0758e4bdcea3d26ecd6d73c9be',   # 3D.patch
    'b5b66bebefd6eb9543daaa5804ad5d8c7f155e9b204cd6fc7eee569abcf9e52e',   # detachment.patch
]

# fix makefile.inc so it is using MKL 3D and detachment
patches = ['mkl.patch', '3D.patch', 'detachment.patch', ]

dependencies = [
    ('freeglut', '3.0.0'),
    ('glew', '2.1.0'),
    ('imkl', '2019.1.144-iimpi-2019.01', '', True),
]

files_to_copy = ['bin', ]

sanity_check_paths = {
    'files': ['bin/play', 'bin/report', 'bin/sim', ],
    'dirs': ['']
}

moduleclass = 'bio'
