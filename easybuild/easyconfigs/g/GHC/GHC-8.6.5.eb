easyblock = 'ConfigureMake'

name = 'GHC'
version = '8.6.5'

homepage = 'http://haskell.org/ghc/'
description = """The Glorious/Glasgow Haskell Compiler"""

toolchain = SYSTEM

# uncomment below and choose one of the distro binaries provided: centos7|deb9|deb8|fedora27
local_distro = 'centos7'

source_urls = ['https://downloads.haskell.org/~ghc/%(version)s/']
sources = ['%%(namelower)s-%%(version)s-x86_64-%s-linux.tar.xz' % local_distro]

# choose the corresponding source checksum
#  '80ab566f4411299f9e5922d60749ca80f989d697db19e03ed875619d699f0edf'  # ghc-8.6.5-x86_64-centos7-linux.tar.xz
#  'bc75f5601a9f41d58b2ba161b9e28fad52143a7229060f1e084168d9b2e914df'  # ghc-8.6.5-x86_64-deb9-linux.tar.xz
#  'c419fd0aa9065fe4d2eb9a248e323860c696ddf3859749ca96a84938aee49107'  # ghc-8.6.5-x86_64-deb8-linux.tar.xz
#  'cf78b53eaf336083e7a05f4a3000afbae4abe5bbc77ef80cc40e09d04ac5b4a1'  # ghc-8.6.5-x86_64-fedora27-linux.tar.xz
checksums = [
    '80ab566f4411299f9e5922d60749ca80f989d697db19e03ed875619d699f0edf'  # ghc-8.6.5-x86_64-centos7-linux.tar.xz
]


# system libgmp.so is required, provided by 'gmp' on rhel 'libgmp10' on debian
osdependencies = [('gmp', 'libgmp10')]
builddependencies = [
    ('binutils', '2.32'),
]

skipsteps = ['build']

sanity_check_paths = {
    'files': ['bin/ghc', 'bin/ghci', 'bin/ghc-pkg', 'bin/runghc', 'bin/runhaskell'],
    'dirs': ['bin', 'lib', 'share'],
}
sanity_check_commands = ['ghc --version']

moduleclass = 'compiler'
