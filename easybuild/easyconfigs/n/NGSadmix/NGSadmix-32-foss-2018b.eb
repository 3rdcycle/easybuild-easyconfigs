easyblock = 'CmdCp'

name = 'NGSadmix'
version = '32'

homepage = 'http://www.popgen.dk/software/index.php/NgsAdmix'
description = """This page contains information about the program called 
NGSadmix, which is a very nice tool for finding admixture proportions 
from NGS data. It is based on genotype likelihoods."""

toolchain = {'name': 'foss', 'version': '2018b'}

# This is a bit of a hack as there is no easyblock to simply download a cpp file and compile it.
# So we download the file from the source and copy it to the build directory. 

sources = [{
    'source_urls': ['http://popgen.dk/software/download/NGSadmix/'],
    'filename': 'ngsadmix32.cpp',
    'download_filename': 'ngsadmix32.cpp',
    'extract_cmd': 'cp %s %(builddir)s',
}]

checksums = ['a5623b71d20114708cfd7ccc5f8c6ce38ff871d1b79af85bc89d38775f2d477e']

build_str = "g++ ngsadmix32.cpp -O3 -lpthread -lz -o NGSadmix"
cmds_map = [('', build_str)]

files_to_copy = ['NGSadmix']

sanity_check_paths = {
    'files': ['NGSadmix'],
    'dirs': [''],
}

modextrapaths = {'PATH': ''}

moduleclass = 'bio'
