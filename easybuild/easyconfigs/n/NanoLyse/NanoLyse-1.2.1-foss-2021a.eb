##
# This is a contribution from SIB Swiss Institute of Bioinformatics
# Homepage:     https://www.sib.swiss/research-infrastructure/competence-centers/vital-it
#
# Authors::     Sebastien Moretti <sebastien.moretti@sib.swiss>
#
##

easyblock = 'PythonBundle'

name = 'NanoLyse'
version = '1.2.1'

homepage = 'https://github.com/wdecoster/nanolyse'
description = """Remove reads mapping to the lambda phage genome from a fastq file."""

toolchain = {'name': 'foss', 'version': '2021a'}

builddependencies = [
    ('binutils', '2.36.1'),
    ('CMake',    '3.20.1'),
    ('make',     '4.3'),
    ('Check',    '0.15.2'),
    ('SWIG',     '4.0.2'),
    ('expat',    '2.2.9'),
    ('bzip2',    '1.0.8'),
    ('zlib',     '1.2.11'),
]

dependencies = [
    ('Python',    '3.9.5'),
    ('Biopython', '1.79'),
]

use_pip = True

# Fetch the tar.gz, not the whl files!
exts_list = [
    ('mappy', '2.24', {
        'checksums': ['35a2fb73ef14173283d5abb31e7a318429e0330c3be95851df38dd83d4ff9af9'],
    }),
    ('NanoLyse', '1.2.1', {
        'checksums': ['933ee668da805fc9ec9fa86c9fca81a073438d45b5f64e23cf606c01e715b1d5'],
    }),
]

sanity_check_paths = {
    'files': ['bin/NanoLyse'],
    'dirs': ['lib/python%(pyshortver)s/site-packages'],
}

sanity_check_commands = ["NanoLyse --version"]

sanity_pip_check = True

moduleclass = 'bio'
