easyblock = 'CMakeMakeCp'

name = 'RAxML-NG'
version = '0.9.0'

homepage = "https://github.com/amkozlov/raxml-ng"
description = """RAxML-NG is a phylogenetic tree inference tool which uses maximum-likelihood (ML) optimality
 criterion. Its search heuristic is based on iteratively performing a series of Subtree Pruning and Regrafting
 (SPR) moves, which allows to quickly navigate to the best-known ML tree."""

toolchain = {'name': 'foss', 'version': '2019b'}

sources = [{
    'filename': 'raxml-ng-0.9.0.tar.gz',
    'git_config': {
        'url': 'https://github.com/amkozlov',
        'repo_name': 'raxml-ng',
        'tag': '0.9.0',
        'recursive': True,
    },
}]


build_type = 'Release'

builddependencies = [
    ('binutils', '2.32'),
    ('CMake', '3.15.3'),
    ('gtest', '1.8.1'),
]

dependencies = [
    ('flex', '2.6.4'), 
    ('Bison', '3.3.2'), 
    ('GMP', '6.1.2'), 
    ('OpenMPI', '3.1.4'),
]

configopts  =  '-DUSE_MPI=ON '
configopts +=  '-DUSE_GMP=ON '

files_to_copy = [
	(["bin/raxml-ng-mpi"], "bin"),
]

sanity_check_paths = {
    'files': ['bin/raxml-ng-mpi'],
    'dirs':  [],
}

separate_build_dir = True

moduleclass = 'bio'
