easyblock = 'ConfigureMake'

name = 'RMBlast'
version = '2.10.0'

homepage = 'http://www.repeatmasker.org/RMBlast.html'
description = """RMBlast is a RepeatMasker compatible version of the standard NCBI BLAST suite. The primary 
 difference between this distribution and the NCBI distribution is the addition of a new program 'rmblastn' 
 for use with RepeatMasker and RepeatModeler."""

toolchain = {'name': 'foss', 'version': '2018b'}

source_urls = ['ftp://ftp.ncbi.nlm.nih.gov/blast/executables/blast+/2.10.0/']
sources = ['ncbi-blast-2.10.0+-src.tar.gz']
patches = [
    ('http://www.repeatmasker.org/isb-2.10.0+-rmblast.patch.gz', 2)
]
checksums = [
    '3acdd9cec01c4f43e56aeaf89049cb8f8013d60b9c1705eced10166967f1d926',  # ncbi-blast-2.10.0+-src.tar.gz
    'f17079292d137e73fa7bafac81e10d0be24ad8cbdd263f4baba8f93f25492bd6',  # isb-2.10.0+-rmblast.patch.gz
]

dependencies = [
    ('zlib', '1.2.11'),
    ('bzip2', '1.0.6'),
    ('Boost', '1.67.0'),
]

configopts = '--with-boost=$EBROOTBOOST --with-64 --with-bin-release --without-debug --with-mt --without-krb5'
configopts += ' --without-openssl --with-z=$EBROOTZLIB --with-bz2=$EBROOTBZIP2'

sanity_check_paths = {
    'files': ['bin/blastp', 'bin/blastn', 'bin/deltablast', 'bin/rmblastn'],
    'dirs': ['lib', 'bin']
}

moduleclass = 'bio'
