easyblock = 'PythonPackage'

name = 'ragout'
version = '2.3'

homepage = 'https://github.com/fenderglass/Ragout'
description = """Ragout (Reference-Assisted Genome Ordering UTility) is a tool
for chromosome-level scaffolding using multiple references. Given initial
assembly fragments (contigs/scaffolds) and one or multiple related references
(complete or draft), it produces a chromosome-scale assembly (as a set of
scaffolds)."""

toolchain = {'name': 'foss', 'version': '2020b'}

github_account = 'fenderglass'
source_urls = [GITHUB_SOURCE]
sources = ['%(version)s.tar.gz']

dependencies = [
    ('Python', '3.8.6'),
    ('Sibelia', '3.0.7'),
    ('HAL', '2.1'),
    ('networkx', '2.5'),
]

use_pip = True
sanity_pip_check = True
download_dep_fail = True

# preinstallopts = "mkdir -p src/vendor/cereal && ln -s %(builddir)s/cereal-*/include src/vendor/cereal/include && "
# preinstallopts += """sed -i "s/, 'cmake==3.18.4'//g" %(builddir)s/pyspoa*/setup.py && """

sanity_check_commands = ['ragout --help']

moduleclass = 'bio'
